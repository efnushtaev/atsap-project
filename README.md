# atsap-project

**Agrotechnical System of Automation Production [AtSAP]**  
Агротехническая система автоматизированного производства — децентрализованная IoT-платформа для сбора, передачи и анализа данных с агротехнических объектов.

---

## Описание проекта

Проект предназначен для автоматизации мониторинга и управления агротехническими объектами (например, теплицами, полями, фермами) с помощью IoT-устройств на базе ESP32, MQTT-брокера и облачных сервисов.

### Основные задачи:
- Сбор данных с датчиков (температура, влажность, влажность почвы, состояние батареи и др.)
- Передача данных по беспроводным протоколам (ESP-NOW, WiFi, MQTT)
- Централизованное хранение и обработка данных
- REST API для интеграции с внешними сервисами и пользовательскими приложениями
- Авторизация и управление пользователями

---

## Структура репозитория

- **atsap-iot-sketches/** — прошивки для IoT-устройств (ESP32)
  - **esp32-controller/** — шлюз (gateway): собирает данные от узлов по ESP-NOW и отправляет их на MQTT-брокер
  - **esp32-node-1/** — пример узла: собирает данные с датчиков (DHT-22, датчик почвы) и отправляет их на шлюз
  - **esp32-battery-check/** — пример узла для мониторинга батареи и окружающей среды
  - **esp32-node-template/** — шаблон для создания новых узлов
- **atsap-mqtt-brocker-proxy/** — Node.js сервис-прокси для работы с MQTT-брокером и REST API для объектов платформы Rightech
- **atsap-users-service-api/** — сервис авторизации и управления пользователями (Node.js, MySQL)
- **README.md** — описание проекта
- **.env, .prettierrc, .eslintrc** — конфигурационные файлы

---

## Как это работает

1. **IoT-узлы (ESP32)** собирают данные с датчиков и отправляют их по ESP-NOW на шлюз.
2. **Шлюз (ESP32-controller)** принимает данные от узлов и публикует их на MQTT-брокер.
3. **MQTT-прокси** (atsap-mqtt-brocker-proxy) предоставляет REST API для работы с объектами и интеграции с платформой Rightech.
4. **Сервис пользователей** (atsap-users-service-api) обеспечивает регистрацию, авторизацию и управление пользователями через REST API.
5. **Внешние приложения** могут получать данные через REST API или подписываться на MQTT-топики.

---

## Для чего нужен проект

- Автоматизация агротехнических процессов (мониторинг, управление, аналитика)
- Снижение человеческого фактора и повышение эффективности производства
- Интеграция с облачными платформами и внешними сервисами
- Масштабируемость и гибкость для различных сценариев агро-IoT

---

## Быстрый старт

1. **Соберите и прошейте устройства ESP32** из каталога `atsap-iot-sketches/`
2. **Запустите сервисы:**
   - atsap-mqtt-brocker-proxy (MQTT-прокси + REST API)
   - atsap-users-service-api (авторизация)
3. **Настройте переменные окружения** в `.env` для каждого сервиса
4. **Используйте REST API** для интеграции с внешними системами

---

## Документация

- [atsap-iot-sketches/README.md](atsap-iot-sketches/README.md) — примеры и рецепты для прошивок ESP32
- [atsap-mqtt-brocker-proxy/README.md](atsap-mqtt-brocker-proxy/README.md) — описание API и настройки прокси
- [atsap-users-service-api/README.md](atsap-users-service-api/README.md) — описание сервиса пользователей

---

## Авторы

- [efnushtaev](https://github.com/efnushtaev) и команда AtSAP
